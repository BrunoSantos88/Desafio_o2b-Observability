groups:
  #Request contagem acesso
 - name: Count greater than 5
   rules:
   - alert: CountGreaterThan5
     expr: ping_request_count > 5
     for: 5s
     
# ALERT UP TIME
 - name: Aplication
   rules:
   - alert: InstanceDown
     expr: up{instance="localhost:3001", job="app"} == 0
     for: 5s
     annotations:
       title: 'Instance {{ $labels.instance }} down'
       description: '{{ $labels.instance }} of job {{ $labels.job }} has been down for more than 1 minute.'
     labels:
       severity: 'critical'
 
  # Atingir espa√ßo abaixo de 1GB
 - name: DISK USAGE
   rules:
   - alert: LowFileNodes
     expr: node_filesystem_files_free{device="/dev/vda1", fstype="ext4", instance="localhost:9100", job="node-exporter", mountpoint="/"} < 1000000
     for: 5s
     labels:
       severity: warning
     annotations:
      summary: "Low file nodes on filesystem"
      description: "The number of free file nodes is below the threshold. Investigate and take action."

  # Link de Dados
 - name: Network Porta Link de Dados
   rules:
   - alert: NetworkInterfaceDown
     expr: node_network_up{device="enp1s0", instance="localhost:9100", job="node-exporter"} == 0
     for: 5s
     labels:
       severity: critical
     annotations:
      summary: "Network interface is down"
      description: "The network interface enp1s0 is down. Investigate and take action."

 - name: Memory Usage
   rules:
   - alert: LowAvailableMemory
     expr: node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes * 100 < 10
     for: 5s
     labels:
       severity: warning
     annotations:
       summary: "Low available memory" 
       description: "The available memory is below the threshold. Investigate and take action."